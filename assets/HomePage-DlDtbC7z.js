import{c as v,j as r,L,B as P,a as $,r as _,u as A}from"./index-Cni_-AX7.js";import{u as E,a as k}from"./useProducts-DasgvRRq.js";import{I as T}from"./Input-_HfRfFAo.js";function B(t){const e=v.c(32),{product:l,onAddToCart:h}=t,d=`/product/${l.id}`;let i;e[0]!==l.image||e[1]!==l.title?(i=r.jsx("img",{src:l.image,alt:l.title,className:"w-full h-48 object-contain mb-4"}),e[0]=l.image,e[1]=l.title,e[2]=i):i=e[2];let n;e[3]!==l.title?(n=r.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2",children:l.title}),e[3]=l.title,e[4]=n):n=e[4];let a;e[5]!==l.description?(a=r.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:l.description}),e[5]=l.description,e[6]=a):a=e[6];let s;e[7]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx("span",{className:"text-yellow-500",children:"â˜…"}),e[7]=s):s=e[7];let m;e[8]!==l.rating.rate?(m=r.jsx("span",{className:"text-sm",children:l.rating.rate}),e[8]=l.rating.rate,e[9]=m):m=e[9];let c;e[10]!==l.rating.count?(c=r.jsxs("span",{className:"text-gray-500 text-sm",children:["(",l.rating.count,")"]}),e[10]=l.rating.count,e[11]=c):c=e[11];let f;e[12]!==m||e[13]!==c?(f=r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s,m,c]}),e[12]=m,e[13]=c,e[14]=f):f=e[14];let o;e[15]!==l.price?(o=l.price.toFixed(2),e[15]=l.price,e[16]=o):o=e[16];let x;e[17]!==o?(x=r.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["$",o]}),e[17]=o,e[18]=x):x=e[18];let u;e[19]!==d||e[20]!==x||e[21]!==i||e[22]!==n||e[23]!==a||e[24]!==f?(u=r.jsxs(L,{to:d,className:"flex-1",children:[i,n,a,f,x]}),e[19]=d,e[20]=x,e[21]=i,e[22]=n,e[23]=a,e[24]=f,e[25]=u):u=e[25];let g;e[26]!==h||e[27]!==l?(g=r.jsx(P,{onClick:j=>{j.preventDefault(),h(l)},className:"mt-4 w-full",children:"Add to Cart"}),e[26]=h,e[27]=l,e[28]=g):g=e[28];let b;return e[29]!==u||e[30]!==g?(b=r.jsxs("div",{className:"border rounded-lg p-4 flex flex-col hover:shadow-lg transition-shadow",children:[u,g]}),e[29]=u,e[30]=g,e[31]=b):b=e[31],b}function D(t){const e=v.c(11),{products:l,loading:h,error:d,onAddToCart:i}=t;if(h){let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx($,{}),e[0]=s):s=e[0],s}if(d){let s;return e[1]!==d.message?(s=r.jsx("div",{className:"text-center p-8 text-red-600",children:r.jsxs("p",{children:["Error loading products: ",d.message]})}),e[1]=d.message,e[2]=s):s=e[2],s}if(l.length===0){let s;return e[3]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx("div",{className:"text-center p-8 text-gray-600",children:r.jsx("p",{children:"No products found"})}),e[3]=s):s=e[3],s}let n;if(e[4]!==i||e[5]!==l){let s;e[7]!==i?(s=m=>r.jsx(B,{product:m,onAddToCart:i},m.id),e[7]=i,e[8]=s):s=e[8],n=l.map(s),e[4]=i,e[5]=l,e[6]=n}else n=e[6];let a;return e[9]!==n?(a=r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n}),e[9]=n,e[10]=a):a=e[10],a}function F(t){const e=v.c(13),{onSearch:l,placeholder:h}=t,d=h===void 0?"Search products...":h,[i,n]=_.useState("");let a;e[0]!==l||e[1]!==i?(a=u=>{u.preventDefault(),l(i)},e[0]=l,e[1]=i,e[2]=a):a=e[2];const s=a;let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=u=>n(u.target.value),e[3]=m):m=e[3];let c;e[4]!==d||e[5]!==i?(c=r.jsx(T,{type:"text",value:i,onChange:m,placeholder:d,className:"flex-1"}),e[4]=d,e[5]=i,e[6]=c):c=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Search"}),e[7]=f):f=e[7];let o;e[8]!==c?(o=r.jsxs("div",{className:"flex gap-2",children:[c,f]}),e[8]=c,e[9]=o):o=e[9];let x;return e[10]!==s||e[11]!==o?(x=r.jsx("form",{onSubmit:s,className:"w-full max-w-md",children:o}),e[10]=s,e[11]=o,e[12]=x):x=e[12],x}function H(){const t=v.c(23),{data:e,loading:l,error:h}=E(),{data:d}=k(),{addToCart:i}=A(),[n,a]=_.useState(null),[s,m]=_.useState("all");let c;t[0]!==e||t[1]!==n?(c=n||e||[],t[0]=e,t[1]=n,t[2]=c):c=t[2];const f=c;let o;t[3]!==e?(o=p=>{if(!e)return;if(!p.trim()){a(null);return}const w=e.filter(S=>S.title.toLowerCase().includes(p.toLowerCase())||S.description.toLowerCase().includes(p.toLowerCase()));a(w)},t[3]=e,t[4]=o):o=t[4];const x=o;let u;t[5]!==e?(u=p=>{if(m(p),!!e)if(p==="all")a(null);else{const w=e.filter(S=>S.category===p);a(w)}},t[5]=e,t[6]=u):u=t[6];const g=u;let b;t[7]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx("h1",{className:"text-4xl font-bold mb-8 text-center",children:"Welcome to E-Shop"}),t[7]=b):b=t[7];let j;t[8]!==x?(j=r.jsx("div",{className:"mb-8 flex justify-center",children:r.jsx(F,{onSearch:x})}),t[8]=x,t[9]=j):j=t[9];let N;t[10]!==d||t[11]!==g||t[12]!==s?(N=d&&r.jsxs("div",{className:"mb-8 flex justify-center gap-2 flex-wrap",children:[r.jsx("button",{onClick:()=>g("all"),className:`px-4 py-2 rounded-lg transition-colors ${s==="all"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"All"}),d.map(p=>r.jsx("button",{onClick:()=>g(p),className:`px-4 py-2 rounded-lg transition-colors capitalize ${s===p?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:p},p))]}),t[10]=d,t[11]=g,t[12]=s,t[13]=N):N=t[13];let y;t[14]!==i||t[15]!==f||t[16]!==h||t[17]!==l?(y=r.jsx(D,{products:f,loading:l,error:h,onAddToCart:i}),t[14]=i,t[15]=f,t[16]=h,t[17]=l,t[18]=y):y=t[18];let C;return t[19]!==j||t[20]!==N||t[21]!==y?(C=r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[b,j,N,y]})}),t[19]=j,t[20]=N,t[21]=y,t[22]=C):C=t[22],C}export{H as HomePage};
